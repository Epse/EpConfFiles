'use babel';

//
// Panics and stack backtraces parser.
//

Object.defineProperty(exports, '__esModule', {
  value: true
});
var path = require('path');

// Constants to detect links to Rust's source code and make them followable
var unixRustSrcPrefix = '../src/';
var windowsRustSrcPrefix = '..\\src\\';

var panicsCounter = 0; // Counts all panics

// Checks if the given file path returned by rustc or cargo points to the Rust source code
function isRustSourceLink(filePath) {
  return filePath.startsWith(unixRustSrcPrefix) || filePath.startsWith(windowsRustSrcPrefix);
}

// Shows panic info
function showPanic(panic) {
  // Only add link if we have panic.filePath, otherwise it's an external link
  atom.notifications.addError('A thread panicked at ' + (panic.filePath ? '<a id="' + panic.id + '" href="#">' : '') + 'line ' + panic.line + ' in ' + panic.file + (panic.filePath ? '</a>' : ''), {
    detail: panic.message,
    stack: panic.stack,
    dismissable: true
  });
  if (panic.filePath) {
    var link = document.getElementById(panic.id);
    if (link) {
      link.panic = panic;
      link.addEventListener('click', function (e) {
        atom.workspace.open(e.target.panic.filePath, {
          searchAllPanes: true,
          initialLine: e.target.panic.line - 1
        });
      });
    }
  }
}

// Tries to parse a stack trace. Returns the quantity of actually parsed lines.
function tryParseStackTrace(lines, i, panic) {
  var parsedQty = 0;
  var line = lines[i];
  if (line.substring(0, 16) === 'stack backtrace:') {
    parsedQty += 1;
    var panicLines = [];
    for (var j = i + 1; j < lines.length; j++) {
      line = lines[j];
      var matchFunc = /^(\s+\d+):\s+0x[a-f0-9]+ - (?:(.+)::h[0-9a-f]+|(.+))$/g.exec(line);
      if (matchFunc) {
        // A line with a function call
        if (atom.config.get('build-cargo.backtraceType') === 'Compact') {
          line = matchFunc[1] + ':  ' + (matchFunc[2] || matchFunc[3]);
        }
        panicLines.push(line);
      } else {
        var matchLink = /(at (.+):(\d+))$/g.exec(line);
        if (matchLink) {
          // A line with a file link
          if (!panic.file && !isRustSourceLink(matchLink[2])) {
            panic.file = matchLink[2]; // Found a link to our source code
            panic.line = matchLink[3];
          }
          panicLines.push('  ' + matchLink[1]); // less leading spaces
        } else {
            // Stack trace has ended
            break;
          }
      }
      parsedQty += 1;
    }
    panic.stack = panicLines.join('\n');
  }
  return parsedQty;
}

// Tries to parse a panic and its stack trace. Returns the quantity of actually
// parsed lines.
var tryParsePanic = function tryParsePanic(lines, i, show, buildWorkDir) {
  var line = lines[i];
  var match = /(thread '.+' panicked at '.+'), ([^\/][^\:]+):(\d+)/g.exec(line);
  var parsedQty = 0;
  if (match) {
    parsedQty = 1;
    var panic = {
      id: 'build-cargo-panic-' + ++panicsCounter, // Unique panic ID
      message: match[1],
      file: isRustSourceLink(match[2]) ? undefined : match[2],
      filePath: undefined,
      line: parseInt(match[3], 10),
      stack: undefined
    };
    parsedQty = 1 + tryParseStackTrace(lines, i + 1, panic);
    if (panic.file) {
      panic.filePath = path.isAbsolute(panic.file) ? panic.file : path.join(buildWorkDir, panic.file);
    } else {
      panic.file = match[2]; // We failed to find a link to our source code, use Rust's
    }
    if (show) {
      showPanic(panic);
    }
  }
  return parsedQty;
};

exports.tryParsePanic = tryParsePanic;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2Vwc2UvRXBDb25mRmlsZXMvYXRvbS8uYXRvbS9wYWNrYWdlcy9idWlsZC1jYXJnby9saWIvcGFuaWMtcGFyc2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQzs7Ozs7Ozs7O0FBTVosSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDOzs7QUFHN0IsSUFBTSxpQkFBaUIsR0FBRyxTQUFTLENBQUM7QUFDcEMsSUFBTSxvQkFBb0IsR0FBRyxXQUFXLENBQUM7O0FBRXpDLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQzs7O0FBR3RCLFNBQVMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFO0FBQ2xDLFNBQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsQ0FBQztDQUM1Rjs7O0FBR0QsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFOztBQUV4QixNQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FDekIsdUJBQXVCLElBQ2hCLEtBQUssQ0FBQyxRQUFRLEdBQUcsU0FBUyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsYUFBYSxHQUFHLEVBQUUsQ0FBQSxBQUFDLEdBQzVELE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxHQUFHLE1BQU0sR0FBRyxLQUFLLENBQUMsSUFBSSxJQUN6QyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sR0FBRyxFQUFFLENBQUEsQUFBQyxFQUFFO0FBQ2hDLFVBQU0sRUFBRSxLQUFLLENBQUMsT0FBTztBQUNyQixTQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUs7QUFDbEIsZUFBVyxFQUFFLElBQUk7R0FDbEIsQ0FBQyxDQUFDO0FBQ1QsTUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ2xCLFFBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQy9DLFFBQUks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QixHQUFJLEVBQUUsYUFBYSxBQUFDO0FBQzVDLGFBQU8sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLFVBQUksRUFBRSxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN2RCxjQUFRLEVBQUUsU0FBUztBQUNuQixVQUFJLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDNUIsV0FBSyxFQUFFLFNBQVM7S0FDakIsQ0FBQztBQUNGLGFBQVMsR0FBRyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDeEQsUUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFO0FBQ2QsV0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNqRyxNQUFNO0FBQ0wsV0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDdkI7QUFDRCxRQUFJLElBQUksRUFBRTtBQUNSLGVBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNsQjtHQUNGO0FBQ0QsU0FBTyxTQUFTLENBQUM7Q0FDbEIsQ0FBQzs7UUFFTyxhQUFhLEdBQWIsYUFBYSIsImZpbGUiOiIvaG9tZS9lcHNlL0VwQ29uZkZpbGVzL2F0b20vLmF0b20vcGFja2FnZXMvYnVpbGQtY2FyZ28vbGliL3BhbmljLXBhcnNlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuXG4vL1xuLy8gUGFuaWNzIGFuZCBzdGFjayBiYWNrdHJhY2VzIHBhcnNlci5cbi8vXG5cbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbi8vIENvbnN0YW50cyB0byBkZXRlY3QgbGlua3MgdG8gUnVzdCdzIHNvdXJjZSBjb2RlIGFuZCBtYWtlIHRoZW0gZm9sbG93YWJsZVxuY29uc3QgdW5peFJ1c3RTcmNQcmVmaXggPSAnLi4vc3JjLyc7XG5jb25zdCB3aW5kb3dzUnVzdFNyY1ByZWZpeCA9ICcuLlxcXFxzcmNcXFxcJztcblxubGV0IHBhbmljc0NvdW50ZXIgPSAwOyAgIC8vIENvdW50cyBhbGwgcGFuaWNzXG5cbi8vIENoZWNrcyBpZiB0aGUgZ2l2ZW4gZmlsZSBwYXRoIHJldHVybmVkIGJ5IHJ1c3RjIG9yIGNhcmdvIHBvaW50cyB0byB0aGUgUnVzdCBzb3VyY2UgY29kZVxuZnVuY3Rpb24gaXNSdXN0U291cmNlTGluayhmaWxlUGF0aCkge1xuICByZXR1cm4gZmlsZVBhdGguc3RhcnRzV2l0aCh1bml4UnVzdFNyY1ByZWZpeCkgfHwgZmlsZVBhdGguc3RhcnRzV2l0aCh3aW5kb3dzUnVzdFNyY1ByZWZpeCk7XG59XG5cbi8vIFNob3dzIHBhbmljIGluZm9cbmZ1bmN0aW9uIHNob3dQYW5pYyhwYW5pYykge1xuICAvLyBPbmx5IGFkZCBsaW5rIGlmIHdlIGhhdmUgcGFuaWMuZmlsZVBhdGgsIG90aGVyd2lzZSBpdCdzIGFuIGV4dGVybmFsIGxpbmtcbiAgYXRvbS5ub3RpZmljYXRpb25zLmFkZEVycm9yKFxuICAgICdBIHRocmVhZCBwYW5pY2tlZCBhdCAnXG4gICAgICAgICsgKHBhbmljLmZpbGVQYXRoID8gJzxhIGlkPVwiJyArIHBhbmljLmlkICsgJ1wiIGhyZWY9XCIjXCI+JyA6ICcnKVxuICAgICAgICArICdsaW5lICcgKyBwYW5pYy5saW5lICsgJyBpbiAnICsgcGFuaWMuZmlsZVxuICAgICAgICArIChwYW5pYy5maWxlUGF0aCA/ICc8L2E+JyA6ICcnKSwge1xuICAgICAgICAgIGRldGFpbDogcGFuaWMubWVzc2FnZSxcbiAgICAgICAgICBzdGFjazogcGFuaWMuc3RhY2ssXG4gICAgICAgICAgZGlzbWlzc2FibGU6IHRydWVcbiAgICAgICAgfSk7XG4gIGlmIChwYW5pYy5maWxlUGF0aCkge1xuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYW5pYy5pZCk7XG4gICAgaWYgKGxpbmspIHtcbiAgICAgIGxpbmsucGFuaWMgPSBwYW5pYztcbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuKGUudGFyZ2V0LnBhbmljLmZpbGVQYXRoLCB7XG4gICAgICAgICAgc2VhcmNoQWxsUGFuZXM6IHRydWUsXG4gICAgICAgICAgaW5pdGlhbExpbmU6IGUudGFyZ2V0LnBhbmljLmxpbmUgLSAxXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbi8vIFRyaWVzIHRvIHBhcnNlIGEgc3RhY2sgdHJhY2UuIFJldHVybnMgdGhlIHF1YW50aXR5IG9mIGFjdHVhbGx5IHBhcnNlZCBsaW5lcy5cbmZ1bmN0aW9uIHRyeVBhcnNlU3RhY2tUcmFjZShsaW5lcywgaSwgcGFuaWMpIHtcbiAgbGV0IHBhcnNlZFF0eSA9IDA7XG4gIGxldCBsaW5lID0gbGluZXNbaV07XG4gIGlmIChsaW5lLnN1YnN0cmluZygwLCAxNikgPT09ICdzdGFjayBiYWNrdHJhY2U6Jykge1xuICAgIHBhcnNlZFF0eSArPSAxO1xuICAgIGNvbnN0IHBhbmljTGluZXMgPSBbXTtcbiAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBsaW5lcy5sZW5ndGg7IGorKykge1xuICAgICAgbGluZSA9IGxpbmVzW2pdO1xuICAgICAgY29uc3QgbWF0Y2hGdW5jID0gL14oXFxzK1xcZCspOlxccysweFthLWYwLTldKyAtICg/OiguKyk6OmhbMC05YS1mXSt8KC4rKSkkL2cuZXhlYyhsaW5lKTtcbiAgICAgIGlmIChtYXRjaEZ1bmMpIHtcbiAgICAgICAgLy8gQSBsaW5lIHdpdGggYSBmdW5jdGlvbiBjYWxsXG4gICAgICAgIGlmIChhdG9tLmNvbmZpZy5nZXQoJ2J1aWxkLWNhcmdvLmJhY2t0cmFjZVR5cGUnKSA9PT0gJ0NvbXBhY3QnKSB7XG4gICAgICAgICAgbGluZSA9IG1hdGNoRnVuY1sxXSArICc6ICAnICsgKG1hdGNoRnVuY1syXSB8fCBtYXRjaEZ1bmNbM10pO1xuICAgICAgICB9XG4gICAgICAgIHBhbmljTGluZXMucHVzaChsaW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1hdGNoTGluayA9IC8oYXQgKC4rKTooXFxkKykpJC9nLmV4ZWMobGluZSk7XG4gICAgICAgIGlmIChtYXRjaExpbmspIHtcbiAgICAgICAgICAvLyBBIGxpbmUgd2l0aCBhIGZpbGUgbGlua1xuICAgICAgICAgIGlmICghcGFuaWMuZmlsZSAmJiAhaXNSdXN0U291cmNlTGluayhtYXRjaExpbmtbMl0pKSB7XG4gICAgICAgICAgICBwYW5pYy5maWxlID0gbWF0Y2hMaW5rWzJdOyAgICAvLyBGb3VuZCBhIGxpbmsgdG8gb3VyIHNvdXJjZSBjb2RlXG4gICAgICAgICAgICBwYW5pYy5saW5lID0gbWF0Y2hMaW5rWzNdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYW5pY0xpbmVzLnB1c2goJyAgJyArIG1hdGNoTGlua1sxXSk7IC8vIGxlc3MgbGVhZGluZyBzcGFjZXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTdGFjayB0cmFjZSBoYXMgZW5kZWRcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcGFyc2VkUXR5ICs9IDE7XG4gICAgfVxuICAgIHBhbmljLnN0YWNrID0gcGFuaWNMaW5lcy5qb2luKCdcXG4nKTtcbiAgfVxuICByZXR1cm4gcGFyc2VkUXR5O1xufVxuXG4vLyBUcmllcyB0byBwYXJzZSBhIHBhbmljIGFuZCBpdHMgc3RhY2sgdHJhY2UuIFJldHVybnMgdGhlIHF1YW50aXR5IG9mIGFjdHVhbGx5XG4vLyBwYXJzZWQgbGluZXMuXG5jb25zdCB0cnlQYXJzZVBhbmljID0gKGxpbmVzLCBpLCBzaG93LCBidWlsZFdvcmtEaXIpID0+IHtcbiAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICBjb25zdCBtYXRjaCA9IC8odGhyZWFkICcuKycgcGFuaWNrZWQgYXQgJy4rJyksIChbXlxcL11bXlxcOl0rKTooXFxkKykvZy5leGVjKGxpbmUpO1xuICBsZXQgcGFyc2VkUXR5ID0gMDtcbiAgaWYgKG1hdGNoKSB7XG4gICAgcGFyc2VkUXR5ID0gMTtcbiAgICBjb25zdCBwYW5pYyA9IHtcbiAgICAgIGlkOiAnYnVpbGQtY2FyZ28tcGFuaWMtJyArICgrK3Bhbmljc0NvdW50ZXIpLCAvLyBVbmlxdWUgcGFuaWMgSURcbiAgICAgIG1lc3NhZ2U6IG1hdGNoWzFdLFxuICAgICAgZmlsZTogaXNSdXN0U291cmNlTGluayhtYXRjaFsyXSkgPyB1bmRlZmluZWQgOiBtYXRjaFsyXSxcbiAgICAgIGZpbGVQYXRoOiB1bmRlZmluZWQsXG4gICAgICBsaW5lOiBwYXJzZUludChtYXRjaFszXSwgMTApLFxuICAgICAgc3RhY2s6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgcGFyc2VkUXR5ID0gMSArIHRyeVBhcnNlU3RhY2tUcmFjZShsaW5lcywgaSArIDEsIHBhbmljKTtcbiAgICBpZiAocGFuaWMuZmlsZSkge1xuICAgICAgcGFuaWMuZmlsZVBhdGggPSBwYXRoLmlzQWJzb2x1dGUocGFuaWMuZmlsZSkgPyBwYW5pYy5maWxlIDogcGF0aC5qb2luKGJ1aWxkV29ya0RpciwgcGFuaWMuZmlsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhbmljLmZpbGUgPSBtYXRjaFsyXTsgIC8vIFdlIGZhaWxlZCB0byBmaW5kIGEgbGluayB0byBvdXIgc291cmNlIGNvZGUsIHVzZSBSdXN0J3NcbiAgICB9XG4gICAgaWYgKHNob3cpIHtcbiAgICAgIHNob3dQYW5pYyhwYW5pYyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJzZWRRdHk7XG59O1xuXG5leHBvcnQgeyB0cnlQYXJzZVBhbmljIH07XG4iXX0=
//# sourceURL=/home/epse/EpConfFiles/atom/.atom/packages/build-cargo/lib/panic-parser.js
